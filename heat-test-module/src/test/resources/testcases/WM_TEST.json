{
  "testSuite": {
    "generalSettings": {
      "suiteDesc": "Example Flow Mode Tests",
      "flowMode": "true"
    },
    "beforeTestSuite": {
      "PIPPO" : "Pluto"
    },
    "testCases": [
      {
        "testId": "001",
        "testName": "Test that __admin/requests returns 0",
        "e2eFlowSteps": [
          {
            "objectName": "Test that __admin/requests returns 0",
            "stepNumber": "1",
            "beforeStep" : {
              "WM_REQUESTS" : "${wiremock[WM_INSTANCE].requests}"
            },
            "webappName": "WM_INSTANCE",
            "httpMethod": "GET",
            "url": "/pippo",
            "queryParameters": {},
            "headers": {},
            "expects": {
              "responseCode": "404",
              "fieldCheck": [
                {
                  "description": "Check that WM_REQUESTS meta.total value is 0",
                  "actualValue": "${preload[WM_REQUESTS].get(total)}",
                  "expectedValue": "0"
                }
              ]
            }
          }
        ]
      },
      {
        "testId": "002",
        "testName": "Test that preloaded variables in beforeTestSuite still work",
        "e2eFlowSteps": [
          {
            "objectName": "Test that preloaded variables in beforeTestSuite still work",
            "stepNumber": "1",
            "webappName": "WM_INSTANCE",
            "httpMethod": "GET",
            "url": "/pippo",
            "queryParameters": {},
            "headers": {},
            "expects": {
              "responseCode": "404",
              "fieldCheck": [
                {
                  "description": "Check that PIPPO variable is correctly preloaded",
                  "actualValue": "${preload[PIPPO]}",
                  "expectedValue": "Pluto"
                }
              ]
            }
          }
        ]
      },
      {
        "testId": "003",
        "testName": "Test behaviour of ${path and ${path[$preload",
        "e2eFlowSteps": [
          {
            "objectName": "Test behaviour of ${path and ${path[$preload",
            "stepNumber": "1",
            "beforeStep" : {
              "WM_REQUESTS" : "${wiremock[WM_INSTANCE].requests}"
            },
            "webappName": "WM_INSTANCE",
            "httpMethod": "GET",
            "url": "/__admin/requests",
            "queryParameters": {},
            "headers": {},
            "expects": {
              "responseCode": "404",
              "fieldCheck": [
                {
                  "description": "Check ${path[requestJournalDisabled]}",
                  "actualValue": "${path[requestJournalDisabled]}",
                  "expectedValue": "false"
                },
                {
                  "description": "Check that WM_REQUESTS.get(total) returns",
                  "actualValue": "${path[${preload(WM_REQUESTS).get(total)]}",
                  "expectedValue": "0"
                }
              ]
            }
          }
        ]
      }
    ]
  }
}
